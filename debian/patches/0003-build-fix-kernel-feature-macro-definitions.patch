From: "You-Sheng Yang (vicamo)" <vicamo.yang@canonical.com>
Date: Mon, 19 Sep 2022 19:11:52 +0800
Subject: build: fix kernel feature macro definitions

CONFIG_INTEL_SKL_INT3472 is always enabled as module in Ubuntu kernel >=
5.14, so it's corresponding kernel feature macros are automatically
defined in kernel autoconf.h and should therefore not be redefined
again.

For CONFIG_POWER_CTRL_LOGIC, since it's now obsoleted and disabled by
default, comment-out its feature macro definition as well.

Signed-off-by: You-Sheng Yang (vicamo) <vicamo.yang@canonical.com>
---
 Makefile | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

diff --git a/Makefile b/Makefile
index 0d72d53..e2c6771 100644
--- a/Makefile
+++ b/Makefile
@@ -3,7 +3,6 @@
 
 export CONFIG_VIDEO_INTEL_IPU6 = m
 export CONFIG_IPU_ISYS_BRIDGE = y
-export CONFIG_INTEL_SKL_INT3472 = m
 obj-y += drivers/media/pci/intel/
 
 export CONFIG_VIDEO_HM11B1 = m
@@ -21,11 +20,9 @@ MODSRC := $(shell pwd)
 subdir-ccflags-y += -I$(src)/include/
 
 subdir-ccflags-$(CONFIG_IPU_ISYS_BRIDGE) += \
-	-DCONFIG_IPU_ISYS_BRIDGE
-subdir-ccflags-$(CONFIG_INTEL_SKL_INT3472) += \
-	-DCONFIG_INTEL_SKL_INT3472
-subdir-ccflags-$(CONFIG_POWER_CTRL_LOGIC) += \
-	-DCONFIG_POWER_CTRL_LOGIC
+	-DCONFIG_IPU_ISYS_BRIDGE=1
+# subdir-ccflags-$(CONFIG_POWER_CTRL_LOGIC) += \
+# 	-DCONFIG_POWER_CTRL_LOGIC_MODULE=1
 subdir-ccflags-y += $(subdir-ccflags-m)
 
 all:
